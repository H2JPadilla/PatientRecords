@model PagedList.IPagedList<EL.PatientEntity>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Patient List";
}
<style>
    .pagination li a,
    .pagination li span {
        display: block;
        padding: 0.5rem 0.75rem;
        margin-left: -1px;
        line-height: 1.25;
        color: #007bff;
        background-color: #fff;
        border: 1px solid #dee2e6;
        text-decoration: none;
    }

    .pagination li.active span {
        background-color: #007bff;
        color: white;
        border-color: #007bff;
    }

    .pagination li.disabled span,
    .pagination li.disabled a {
        color: #6c757d;
        pointer-events: none;
        background-color: #fff;
        border-color: #dee2e6;
    }

    .no-results {
        text-align: center;
        font-style: italic;
        color: #888;
    }
</style>

<h2>Prescription List</h2>

<div class="row mb-3">
    <div class="col-md-3">
        <label>Patient Name</label>
        <input type="text" id="searchPatient" class="form-control" placeholder="Search by Patient" onkeyup="filterTable()" />
    </div>
    <div class="col-md-3">
        <label>Drug Name</label>
        <input type="text" id="searchDrug" class="form-control" placeholder="Search by Drug" onkeyup="filterTable()" />
    </div>
    <div class="col-md-2">
        <label>Dose</label>
        <input type="text" id="searchDose" class="form-control" placeholder="Search by Dose" onkeyup="filterTable()" />
    </div>
    <div class="col-md-2">
        <label>Date</label>
        <input type="date" id="searchDate" class="form-control" onchange="filterTable()" />
    </div>

    <div class="col-md-2 d-flex align-items-end gap-2">
        <button type="button" class="btn btn-secondary" onclick="resetSearch()">Reset</button>
        @Html.ActionLink("Add Prescription", "AddPatient", "Patient", new { area = "Admin" }, new { @class = "btn btn-success" })
    </div>
</div>

@Html.AntiForgeryToken()

<table class="table table-striped table-bordered table-hover" id="drugsTable">
    <thead class="table-dark">
        <tr>
            <th style="width:50px;">Id</th>
            <th style="width:500px;">Patient</th>
            <th style="width:200px;">Drug</th>
            <th style="width:200px;">Dosage</th>
            <th style="width:200px;">Date</th>
            <th style="width:150px;">Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var drug in Model)
        {
            <tr id="drugRow_@drug.ID">
                <td>@drug.ID</td>
                <td>@drug.Patient</td>
                <td>@drug.DrugName</td>
                <td>@drug.Dosage</td>
                <td>@drug.ModifiedDate.ToString("MM/dd/yyyy")</td>
                <td>
                    @Html.ActionLink("Update", "UpdatePatient", "Patient",
                        new { id = drug.ID, area = "Admin" },
                        new { @class = "btn btn-sm btn-warning me-2 btn-update" })

                    <button type="button"
                            class="btn btn-danger btn-sm btn-delete"
                            data-id="@drug.ID"
                            data-modal-title="Delete Prescription"
                            data-modal-body="Are you sure you want to delete this prescription?"
                            data-modal-confirm-text="Yes, Delete"
                            data-modal-confirm-class="btn-danger">
                        Delete
                    </button>
                </td>
            </tr>
        }
    </tbody>
</table>

<p id="noResults" class="no-results" style="display:none;">No matching records found.</p>

@Html.PagedListPager(Model, page => Url.Action("ViewPatient", new { page }),
    new PagedListRenderOptions
    {
        LiElementClasses = new[] { "page-item" },
        UlElementClasses = new[] { "pagination justify-content-center" },
        LinkToPreviousPageFormat = "Previous",
        LinkToNextPageFormat = "Next",
        MaximumPageNumbersToDisplay = 5
    })

    <script src="~/Areas/Admin/Content/JS/filter.js"></script>  

